<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd"
       default-autowire="byName" default-lazy-init="true">

    <description>JMX客户端配置</description>
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations"
                  value="classpath:conf/develop/app.properties"/>
    </bean>
    <bean id="dsaService" class="oms.security.remoting.dsa.DSAService">
        <property name="privateKey" value="classpath:private.key"></property>
    </bean>

    <bean name="omsUserProxy" class="org.springframework.remoting.caucho.HessianProxyFactoryBean">
        <property name="serviceUrl" value="http://${server.addr}:${jmx.rmi_port}/remote/OmsUserService"></property>
        <property name="serviceInterface">
            <value>oms.security.rmi.server.mbean.OmsUserMBean</value>
        </property>
        <property name="proxyFactory">
            <bean class="oms.security.remoting.caucho.EncryptionHessianProxyFactory">
                <property name="dsaService">
                    <ref bean="dsaService"></ref>
                </property>
                <!-- 固定的加密字符串，与服务端保持一致 -->
                <property name="secureKey" value="734b794d4f62694f4d73"/>
            </bean>
        </property>
    </bean>

    <bean name="omsUserPermissionProxy" class="org.springframework.remoting.caucho.HessianProxyFactoryBean">
        <property name="serviceUrl"
                  value="http://${server.addr}:${jmx.rmi_port}/remote/OmsUserPermissionsService"></property>
        <property name="serviceInterface">
            <value>oms.security.rmi.server.mbean.OmsUserPermissionsMBean</value>
        </property>
        <property name="proxyFactory">
            <bean class="oms.security.remoting.caucho.EncryptionHessianProxyFactory">
                <property name="dsaService">
                    <ref bean="dsaService"></ref>
                </property>
                <property name="secureKey" value="734b794d4f62694f4d73"/>
            </bean>
        </property>

    </bean>

    <!--
   <bean name="omsUserProxy" class="org.springframework.remoting.caucho.HessianProxyFactoryBean">
        <property name="serviceUrl" value="http://${server.addr}:${jmx.rmi_port}/remote/OmsUserService"></property>
        <property name="serviceInterface">
            <value>oms.security.rmi.server.mbean.OmsUserMBean</value>
        </property>
   </bean>

    <bean name="omsUserPermissionProxy" class="org.springframework.remoting.caucho.HessianProxyFactoryBean">
        <property name="serviceUrl" value="http://${server.addr}:${jmx.rmi_port}/remote/OmsUserPermissionsService"></property>
        <property name="serviceInterface">
            <value>oms.security.rmi.server.mbean.OmsUserPermissionsMBean</value>
        </property>
   </bean>
    -->

</beans>